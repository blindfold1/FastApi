2025-04-01 14:57:29,679 - INFO - backend.src.core.config - Starting up application...
2025-04-01 15:13:11,707 - INFO - backend.src.core.config - Shutting down application...
2025-04-01 15:13:11,708 - INFO - backend.src.core.config - Database connection closed
2025-04-01 15:13:18,178 - INFO - backend.src.core.config - Starting up application...
2025-04-02 12:18:54,444 - INFO - backend.src.core.config - Starting up application...
2025-04-02 12:29:15,736 - INFO - backend.src.core.config - Shutting down application...
2025-04-02 12:29:15,739 - INFO - backend.src.core.config - Database connection closed
2025-04-02 12:29:57,900 - INFO - backend.src.core.config - Starting up application...
2025-04-02 12:30:16,181 - INFO - backend.src.core.config - Fetching all users
2025-04-02 12:30:16,197 - ERROR - backend.src.core.config - Database error while fetching users: Inspection on an AsyncEngine is currently not supported. Please obtain a connection then use ``conn.run_sync`` to pass a callable where it's possible to call ``inspect`` on the passed connection. (Background on this error at: https://sqlalche.me/e/20/xd3s)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 133, in get_users
    await check_table_exists(db)
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    inspector = inspect(db.bind)
                ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\inspection.py", line 140, in inspect
    ret = reg(subject)
          ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 1461, in _no_insp_for_async_engine_xyet
    raise exc.NoInspectionAvailable(
sqlalchemy.exc.NoInspectionAvailable: Inspection on an AsyncEngine is currently not supported. Please obtain a connection then use ``conn.run_sync`` to pass a callable where it's possible to call ``inspect`` on the passed connection. (Background on this error at: https://sqlalche.me/e/20/xd3s)
2025-04-02 12:31:42,541 - INFO - backend.src.core.config - Shutting down application...
2025-04-02 12:31:42,541 - INFO - backend.src.core.config - Database connection closed
2025-04-02 12:31:53,159 - INFO - backend.src.core.config - Starting up application...
2025-04-02 12:31:53,718 - INFO - backend.src.core.config - Shutting down application...
2025-04-02 12:31:53,718 - INFO - backend.src.core.config - Database connection closed
2025-04-02 13:16:01,125 - INFO - backend.src.core.config - Starting up application...
2025-04-02 13:16:29,346 - INFO - backend.src.core.config - Fetching all users
2025-04-02 13:16:29,352 - ERROR - backend.src.core.config - Error checking table existence: No inspection system is available for object of type <class 'sqlalchemy.orm.session.Session'>
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 46, in check_table_exists
    table_exists = await db.run_sync(sync_check_table_exists)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 398, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 42, in sync_check_table_exists
    inspector = inspect(connection)
                ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\inspection.py", line 147, in inspect
    raise exc.NoInspectionAvailable(
sqlalchemy.exc.NoInspectionAvailable: No inspection system is available for object of type <class 'sqlalchemy.orm.session.Session'>
2025-04-02 13:46:14,338 - INFO - backend.src.core.config - Starting up application...
2025-04-02 13:46:26,875 - INFO - backend.src.core.config - Fetching all users
2025-04-02 13:46:27,079 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-02 13:46:27,095 - ERROR - backend.src.core.config - Database error while fetching users: Mapper 'Mapper[Users(users)]' has no property 'tracker'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2522, in get_property
    return self._props[key]
           ~~~~~~~~~~~^^^^^
KeyError: 'tracker'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 139, in get_users
    result = await db.execute(select(Users))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 711, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 4693, in visit_select
    compile_state = select_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1592, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2524, in get_property
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Users(users)]' has no property 'tracker'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-04-02 13:50:28,164 - INFO - backend.src.core.config - Shutting down application...
2025-04-02 13:50:28,171 - INFO - backend.src.core.config - Database connection closed
2025-04-02 13:53:04,049 - INFO - backend.src.core.config - Starting up application...
2025-04-02 13:53:19,592 - INFO - backend.src.core.config - Fetching all users
2025-04-02 13:53:19,734 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-02 13:53:19,781 - ERROR - backend.src.core.config - Database error while fetching users: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец users.scope не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: столбец users.scope не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец users.scope не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 139, in get_users
    result = await db.execute(select(Users))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец users.scope не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-04 10:42:40,376 - INFO - backend.src.core.config - Starting up application...
2025-04-04 10:42:57,800 - INFO - backend.src.core.config - Fetching all users
2025-04-04 10:42:57,997 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-04 10:42:58,015 - ERROR - backend.src.core.config - Database error while fetching users: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец users.scope не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: столбец users.scope не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец users.scope не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 139, in get_users
    result = await db.execute(select(Users))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: столбец users.scope не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-04 10:53:53,311 - INFO - backend.src.core.config - Starting up application...
2025-04-04 10:53:55,630 - INFO - backend.src.core.config - Fetching all users
2025-04-04 10:53:55,746 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-04 10:53:55,761 - INFO - backend.src.core.config - Found 1 users
2025-04-04 10:56:10,219 - INFO - backend.src.core.config - Creating user with username: admin
2025-04-04 10:56:10,221 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-04 10:56:10,650 - INFO - backend.src.core.config - User admin created successfully with ID 2
2025-04-04 10:59:21,220 - INFO - backend.src.core.config - Fetching all users
2025-04-04 10:59:21,220 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-04 10:59:21,220 - INFO - backend.src.core.config - Found 2 users
2025-04-04 11:21:22,483 - INFO - backend.src.core.config - Starting up application...
2025-04-04 11:21:31,446 - INFO - backend.src.core.config - Starting up application...
2025-04-04 11:41:27,829 - INFO - backend.src.core.config - Starting up application...
2025-04-04 11:41:43,498 - INFO - backend.src.core.config - Starting up application...
2025-04-05 00:58:37,080 - INFO - backend.src.core.config - Starting up application...
2025-04-05 01:04:57,090 - INFO - backend.src.core.config - Shutting down application...
2025-04-05 01:04:57,090 - INFO - backend.src.core.config - Database connection closed
2025-04-05 01:12:13,566 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 01:12:14,765 - INFO - backend.src.core.config - Running migrations
2025-04-05 01:25:20,871 - INFO - backend.src.core.config - Shutting up the application
2025-04-05 01:25:20,872 - INFO - backend.src.core.config - Database connection closed
2025-04-05 01:25:48,961 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 01:25:50,209 - INFO - backend.src.core.config - Running migrations
2025-04-05 01:34:21,900 - INFO - backend.src.core.config - Shutting up the application
2025-04-05 01:34:21,901 - INFO - backend.src.core.config - Database connection closed
2025-04-05 01:34:29,877 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 01:34:31,082 - INFO - backend.src.core.config - Running migrations
2025-04-05 12:28:14,209 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 12:28:15,453 - INFO - backend.src.core.config - Running migrations
2025-04-05 12:40:00,640 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 12:40:02,011 - INFO - backend.src.core.config - Running migrations
2025-04-05 12:41:35,489 - INFO - backend.src.core.config - Shutting up the application
2025-04-05 12:41:35,504 - INFO - backend.src.core.config - Database connection closed
2025-04-05 12:51:50,193 - INFO - backend.src.core.config - Starting up application...
2025-04-05 12:51:51,679 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 12:51:52,951 - INFO - backend.src.core.config - Alembic migrations applied successfully
2025-04-05 12:52:32,949 - INFO - backend.src.core.config - Fetching all users
2025-04-05 12:52:33,099 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-05 12:52:33,116 - INFO - backend.src.core.config - Found 2 users
2025-04-05 12:54:23,245 - INFO - backend.src.core.config - Shutting down application...
2025-04-05 12:54:23,245 - INFO - backend.src.core.config - Database connection closed
2025-04-05 13:08:47,223 - INFO - backend.src.core.config - Starting up application...
2025-04-05 13:08:48,583 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 13:08:50,515 - INFO - backend.src.core.config - Alembic migrations applied successfully
2025-04-05 13:09:42,922 - INFO - backend.src.core.config - Shutting down application...
2025-04-05 13:09:42,923 - INFO - backend.src.core.config - Database connection closed
2025-04-05 13:09:56,134 - INFO - backend.src.core.config - Starting up application...
2025-04-05 13:09:57,433 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 13:09:58,668 - INFO - backend.src.core.config - Alembic migrations applied successfully
2025-04-05 13:15:52,397 - INFO - backend.src.core.config - Starting up application...
2025-04-05 13:15:53,753 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 13:15:55,337 - INFO - backend.src.core.config - Alembic migrations applied successfully
2025-04-05 13:24:00,564 - INFO - backend.src.core.config - Starting up application...
2025-04-05 13:24:01,960 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 13:24:03,380 - INFO - backend.src.core.config - Alembic migrations applied successfully
2025-04-05 18:48:32,771 - INFO - backend.src.core.config - Starting up application...
2025-04-05 18:48:34,403 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 18:48:36,980 - INFO - backend.src.core.config - Alembic migrations applied successfully
2025-04-05 18:55:53,973 - INFO - backend.src.core.config - Starting up application...
2025-04-05 18:55:55,583 - INFO - backend.src.core.config - Current migration version: 239f534d1bde (head)
2025-04-05 18:55:57,395 - INFO - backend.src.core.config - Alembic migrations applied successfully
2025-04-05 18:56:41,335 - INFO - backend.src.core.config - Shutting down application...
2025-04-05 18:56:41,336 - INFO - backend.src.core.config - Database connection closed
2025-04-05 21:13:09,800 - INFO - backend.src.core.config - Starting up application...
2025-04-05 21:13:12,246 - WARNING - backend.src.core.config - No migrations applied. Generating and applying migrations...
2025-04-05 21:13:15,451 - ERROR - backend.src.core.config - Failed to apply migrations: Command '['alembic', 'revision', '--autogenerate', '-m', 'Initial migration']' returned non-zero exit status 4294967295.
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\main.py", line 37, in lifespan
    subprocess.run(
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\subprocess.py", line 571, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['alembic', 'revision', '--autogenerate', '-m', 'Initial migration']' returned non-zero exit status 4294967295.
2025-04-05 21:21:37,710 - INFO - backend.src.core.config - Starting up application...
2025-04-05 21:22:25,231 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:32:28,168 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing redis.asyncio...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:32:28,186 - INFO - backend.src.core.config - Using REDIS_HOST: redis, REDIS_PORT: 6379
2025-04-06 15:32:28,191 - INFO - backend.src.core.config - Successfully initialized Redis client. Ping result: <coroutine object Redis.execute_command at 0x000001D6D564A8A0>
2025-04-06 15:32:28,192 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:32:28,195 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:32:28,384 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:32:28,384 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing redis.asyncio...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Using REDIS_HOST: redis, REDIS_PORT: 6379
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - Successfully initialized Redis client. Ping result: <coroutine object Redis.execute_command at 0x000001ED68F5A8A0>
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:32:33,809 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:32:34,006 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:32:34,006 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing redis.asyncio...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Using REDIS_HOST: redis, REDIS_PORT: 6379
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - Successfully initialized Redis client. Ping result: <coroutine object Redis.execute_command at 0x000002108F48A8A0>
2025-04-06 15:35:48,719 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:35:48,735 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:35:48,890 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:35:48,890 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing redis.asyncio...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Using REDIS_HOST: redis, REDIS_PORT: 6379
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - Redis client initialized (ping will be checked asynchronously)
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:44:34,020 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:44:34,195 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:44:34,195 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing redis.asyncio...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Using REDIS_HOST: redis, REDIS_PORT: 6379
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - Redis client initialized (ping will be checked asynchronously)
2025-04-06 15:44:48,481 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:44:48,497 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:44:48,685 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:44:48,685 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:53:08,692 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:53:08,695 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:53:08,698 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:53:08,883 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:53:08,883 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:53:15,020 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:53:15,027 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:53:15,232 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:53:15,232 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:53:22,002 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:53:22,006 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:53:22,006 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:53:22,009 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:53:22,216 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:53:22,216 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 15:53:30,013 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 15:53:30,013 - INFO - backend.src.core.config - Importing json...
2025-04-06 15:53:30,013 - INFO - backend.src.core.config - Importing os...
2025-04-06 15:53:30,013 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 15:53:30,021 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 15:53:30,029 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 15:53:30,205 - INFO - backend.src.core.config - Starting up application...
2025-04-06 15:53:30,205 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing json...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing os...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 16:03:50,373 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 16:03:50,374 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 16:03:50,374 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 16:03:50,374 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 16:03:50,374 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 16:03:50,374 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 16:03:50,379 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 16:03:50,595 - INFO - backend.src.core.config - Starting up application...
2025-04-06 16:03:50,595 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing json...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing os...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 16:04:41,414 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 16:04:41,420 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 16:04:41,561 - INFO - backend.src.core.config - Starting up application...
2025-04-06 16:04:41,561 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:15:23,239 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:15:23,255 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:15:23,476 - INFO - backend.src.core.config - Starting up application...
2025-04-06 18:15:23,476 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 18:18:54,817 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:18:54,817 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:18:54,817 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:18:54,817 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:18:54,817 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:18:54,817 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:18:54,918 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:18:54,926 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:18:55,142 - INFO - backend.src.core.config - Starting up application...
2025-04-06 18:18:55,142 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 18:22:58,871 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:22:58,871 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:22:58,871 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:22:58,871 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:22:58,871 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:22:58,871 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:22:59,047 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:22:59,054 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:25:18,227 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:25:18,227 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:25:18,227 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:25:18,227 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:25:18,227 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:25:18,227 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:25:18,384 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:25:37,773 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:25:37,774 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:25:37,774 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:25:37,774 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:25:37,774 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:25:37,774 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:25:37,851 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:25:37,855 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:25:38,015 - INFO - backend.src.core.config - Starting up application...
2025-04-06 18:25:38,015 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 18:40:00,408 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 18:40:00,432 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 18:40:00,441 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 18:40:00,444 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:40:00,444 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:40:00,444 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:40:00,444 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:40:00,444 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:40:00,444 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:40:00,519 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:40:00,534 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:40:00,534 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 18:40:00,534 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 18:40:00,534 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 18:40:00,542 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 18:40:00,542 - INFO - backend.src.core.config - Including food_router...
2025-04-06 18:40:00,547 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 18:40:00,552 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 18:40:00,708 - INFO - backend.src.core.config - Starting up application...
2025-04-06 18:40:00,708 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 18:51:07,976 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 18:51:08,009 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 18:51:08,015 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 18:51:08,015 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:51:08,015 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:51:08,015 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:51:08,015 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:51:08,015 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:51:08,015 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:51:08,087 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:51:08,087 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:51:08,087 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:51:08,087 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:51:08,090 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:51:08,090 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:51:08,090 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:51:08,090 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:51:08,094 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:51:08,094 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 18:51:08,094 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 18:51:08,094 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 18:51:08,100 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 18:51:08,100 - INFO - backend.src.core.config - Including food_router...
2025-04-06 18:51:08,102 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 18:51:08,106 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 18:51:08,238 - INFO - backend.src.core.config - Starting up application...
2025-04-06 18:51:08,238 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 18:53:48,348 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 18:53:48,388 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 18:53:48,393 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 18:53:48,393 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:53:48,393 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:53:48,393 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:53:48,393 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:53:48,393 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:53:48,397 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:53:48,481 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:53:48,484 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:53:48,484 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 18:53:48,484 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 18:53:48,484 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 18:53:48,488 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 18:53:48,488 - INFO - backend.src.core.config - Including food_router...
2025-04-06 18:53:48,494 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 18:53:48,504 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 18:53:48,667 - INFO - backend.src.core.config - Starting up application...
2025-04-06 18:53:48,667 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 18:55:34,768 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 18:55:34,784 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 18:55:34,800 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 18:55:34,800 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 18:55:34,800 - INFO - backend.src.core.config - Importing json...
2025-04-06 18:55:34,800 - INFO - backend.src.core.config - Importing os...
2025-04-06 18:55:34,800 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 18:55:34,800 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 18:55:34,800 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 18:55:34,947 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 18:55:34,963 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 18:55:34,963 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 18:55:34,963 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 18:55:34,963 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 18:55:34,972 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 18:55:34,972 - INFO - backend.src.core.config - Including food_router...
2025-04-06 18:55:34,972 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 18:55:34,979 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:00:34,357 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 19:00:34,401 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 19:00:34,407 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 19:00:34,408 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 19:00:34,408 - INFO - backend.src.core.config - Importing json...
2025-04-06 19:00:34,408 - INFO - backend.src.core.config - Importing os...
2025-04-06 19:00:34,408 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 19:00:34,408 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 19:00:34,408 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 19:00:34,491 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 19:00:34,497 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 19:00:34,497 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 19:00:34,497 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 19:00:34,497 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 19:00:34,504 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 19:00:34,504 - INFO - backend.src.core.config - Including food_router...
2025-04-06 19:00:34,506 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 19:00:34,511 - INFO - backend.src.core.config - clients_router included successfully
2025-04-06 19:00:34,511 - INFO - backend.src.core.config - database_router included successfully
2025-04-06 19:00:34,511 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:00:34,733 - INFO - backend.src.core.config - Starting up application...
2025-04-06 19:00:34,733 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 19:01:02,674 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 19:01:02,696 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 19:01:02,703 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 19:01:02,703 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 19:01:02,703 - INFO - backend.src.core.config - Importing json...
2025-04-06 19:01:02,703 - INFO - backend.src.core.config - Importing os...
2025-04-06 19:01:02,703 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 19:01:02,703 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 19:01:02,703 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 19:01:02,785 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 19:01:02,788 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 19:01:02,788 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 19:01:02,788 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 19:01:02,788 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 19:01:02,792 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 19:01:02,792 - INFO - backend.src.core.config - Including food_router...
2025-04-06 19:01:02,796 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 19:01:02,796 - INFO - backend.src.core.config - clients_router included successfully
2025-04-06 19:01:02,796 - INFO - backend.src.core.config - database_router included successfully
2025-04-06 19:01:02,796 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:01:02,921 - INFO - backend.src.core.config - Starting up application...
2025-04-06 19:01:02,921 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 19:11:44,013 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Importing json...
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Importing os...
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 19:11:44,040 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 19:11:44,119 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 19:11:44,125 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 19:11:44,125 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 19:11:44,125 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 19:11:44,125 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 19:11:44,129 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 19:11:44,129 - INFO - backend.src.core.config - Including food_router...
2025-04-06 19:11:44,129 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 19:11:44,137 - INFO - backend.src.core.config - clients_router included successfully
2025-04-06 19:11:44,137 - INFO - backend.src.core.config - database_router included successfully
2025-04-06 19:11:44,137 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:11:44,264 - INFO - backend.src.core.config - Starting up application...
2025-04-06 19:11:44,264 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 19:14:47,599 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 19:14:47,630 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 19:14:47,636 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 19:14:47,636 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 19:14:47,636 - INFO - backend.src.core.config - Importing json...
2025-04-06 19:14:47,637 - INFO - backend.src.core.config - Importing os...
2025-04-06 19:14:47,637 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 19:14:47,637 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 19:14:47,637 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 19:14:47,710 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 19:14:47,723 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 19:14:47,723 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 19:14:47,723 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 19:14:47,723 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 19:14:47,727 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 19:14:47,727 - INFO - backend.src.core.config - Including food_router...
2025-04-06 19:14:47,727 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 19:14:47,727 - INFO - backend.src.core.config - clients_router included successfully
2025-04-06 19:14:47,727 - INFO - backend.src.core.config - database_router included successfully
2025-04-06 19:14:47,727 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:14:47,887 - INFO - backend.src.core.config - Starting up application...
2025-04-06 19:14:47,887 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 19:15:18,930 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 19:15:18,961 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 19:15:18,973 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 19:15:18,973 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 19:15:18,973 - INFO - backend.src.core.config - Importing json...
2025-04-06 19:15:18,973 - INFO - backend.src.core.config - Importing os...
2025-04-06 19:15:18,973 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 19:15:18,973 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 19:15:18,975 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 19:15:19,061 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 19:15:19,063 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 19:15:19,063 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 19:15:19,063 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 19:15:19,063 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 19:15:19,070 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 19:15:19,070 - INFO - backend.src.core.config - Including food_router...
2025-04-06 19:15:19,070 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 19:15:19,078 - INFO - backend.src.core.config - clients_router included successfully
2025-04-06 19:15:19,078 - INFO - backend.src.core.config - database_router included successfully
2025-04-06 19:15:19,078 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:15:19,213 - INFO - backend.src.core.config - Starting up application...
2025-04-06 19:15:19,213 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-06 19:17:52,700 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Importing json...
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Importing os...
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 19:17:52,726 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 19:17:52,909 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 19:17:52,909 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 19:17:52,909 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 19:17:52,909 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 19:17:52,909 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 19:17:52,914 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 19:17:52,914 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 19:17:52,914 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 19:17:52,917 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 19:17:52,922 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 19:17:52,922 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 19:17:52,922 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 19:17:52,924 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 19:17:52,924 - INFO - backend.src.core.config - Including food_router...
2025-04-06 19:17:52,930 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 19:17:52,930 - INFO - backend.src.core.config - clients_router included successfully
2025-04-06 19:17:52,930 - INFO - backend.src.core.config - database_router included successfully
2025-04-06 19:17:52,930 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:18:00,138 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-06 19:18:00,170 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-06 19:18:00,185 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-06 19:18:00,185 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-06 19:18:00,185 - INFO - backend.src.core.config - Importing json...
2025-04-06 19:18:00,185 - INFO - backend.src.core.config - Importing os...
2025-04-06 19:18:00,185 - INFO - backend.src.core.config - Importing datetime...
2025-04-06 19:18:00,201 - INFO - backend.src.core.config - Importing fastapi...
2025-04-06 19:18:00,201 - INFO - backend.src.core.config - Importing httpx...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - food_router created successfully
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-06 19:18:00,285 - INFO - backend.src.core.config - Including auth_router...
2025-04-06 19:18:00,297 - INFO - backend.src.core.config - auth_router included successfully
2025-04-06 19:18:00,297 - INFO - backend.src.core.config - Including food_router...
2025-04-06 19:18:00,297 - INFO - backend.src.core.config - food_router included successfully
2025-04-06 19:18:00,297 - INFO - backend.src.core.config - clients_router included successfully
2025-04-06 19:18:00,297 - INFO - backend.src.core.config - database_router included successfully
2025-04-06 19:18:00,297 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-06 19:18:00,440 - INFO - backend.src.core.config - Starting up application...
2025-04-06 19:18:00,440 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-07 17:37:08,948 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-07 17:37:08,971 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-07 17:37:08,987 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-07 17:37:08,988 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-07 17:37:08,988 - INFO - backend.src.core.config - Importing json...
2025-04-07 17:37:08,988 - INFO - backend.src.core.config - Importing os...
2025-04-07 17:37:08,988 - INFO - backend.src.core.config - Importing datetime...
2025-04-07 17:37:08,988 - INFO - backend.src.core.config - Importing fastapi...
2025-04-07 17:37:08,988 - INFO - backend.src.core.config - Importing httpx...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-07 17:37:09,122 - INFO - backend.src.core.config - food_router created successfully
2025-04-07 17:37:09,125 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-07 17:37:09,125 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-07 17:37:09,125 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-07 17:37:09,125 - INFO - backend.src.core.config - Including auth_router...
2025-04-07 17:37:09,131 - INFO - backend.src.core.config - auth_router included successfully
2025-04-07 17:37:09,131 - INFO - backend.src.core.config - Including food_router...
2025-04-07 17:37:09,135 - INFO - backend.src.core.config - food_router included successfully
2025-04-07 17:37:09,142 - INFO - backend.src.core.config - clients_router included successfully
2025-04-07 17:37:09,142 - INFO - backend.src.core.config - database_router included successfully
2025-04-07 17:37:09,142 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-07 17:37:09,366 - INFO - backend.src.core.config - Starting up application...
2025-04-07 17:37:09,366 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-07 18:33:16,561 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-07 18:33:16,601 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-07 18:33:16,606 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-07 18:33:16,609 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-07 18:33:16,609 - INFO - backend.src.core.config - Importing json...
2025-04-07 18:33:16,609 - INFO - backend.src.core.config - Importing os...
2025-04-07 18:33:16,609 - INFO - backend.src.core.config - Importing datetime...
2025-04-07 18:33:16,609 - INFO - backend.src.core.config - Importing fastapi...
2025-04-07 18:33:16,609 - INFO - backend.src.core.config - Importing httpx...
2025-04-07 18:33:16,802 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-07 18:33:16,802 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-07 18:33:16,803 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-07 18:33:16,803 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-07 18:33:16,803 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-07 18:33:16,803 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-07 18:33:16,803 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-07 18:33:16,803 - INFO - backend.src.core.config - food_router created successfully
2025-04-07 18:33:16,805 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-07 18:33:16,805 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-07 18:33:16,805 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-07 18:33:16,805 - INFO - backend.src.core.config - Including auth_router...
2025-04-07 18:33:16,812 - INFO - backend.src.core.config - auth_router included successfully
2025-04-07 18:33:16,812 - INFO - backend.src.core.config - Including food_router...
2025-04-07 18:33:16,815 - INFO - backend.src.core.config - food_router included successfully
2025-04-07 18:33:16,818 - INFO - backend.src.core.config - clients_router included successfully
2025-04-07 18:33:16,818 - INFO - backend.src.core.config - database_router included successfully
2025-04-07 18:33:16,818 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-07 18:33:33,257 - INFO - backend.src.core.config - Starting to initialize routes...
2025-04-07 18:33:33,280 - INFO - backend.src.core.config - Imported auth_router successfully
2025-04-07 18:33:33,288 - INFO - backend.src.core.config - Imported clients_router successfully
2025-04-07 18:33:33,288 - INFO - backend.src.core.config - Starting to import foods.py...
2025-04-07 18:33:33,289 - INFO - backend.src.core.config - Importing json...
2025-04-07 18:33:33,289 - INFO - backend.src.core.config - Importing os...
2025-04-07 18:33:33,289 - INFO - backend.src.core.config - Importing datetime...
2025-04-07 18:33:33,289 - INFO - backend.src.core.config - Importing fastapi...
2025-04-07 18:33:33,289 - INFO - backend.src.core.config - Importing httpx...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - Importing sqlalchemy...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - Importing backend.src.db...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - Importing backend.src.core.security...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - Importing backend.src.core.config...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - Importing backend.src.db.database...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - Importing backend.src.models.tables...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - Importing backend.src.schemas.pydantic_models...
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - food_router created successfully
2025-04-07 18:33:33,415 - INFO - backend.src.core.config - foods.py imported successfully
2025-04-07 18:33:33,426 - INFO - backend.src.core.config - Imported food_router successfully
2025-04-07 18:33:33,426 - INFO - backend.src.core.config - Imported database_router successfully
2025-04-07 18:33:33,426 - INFO - backend.src.core.config - Including auth_router...
2025-04-07 18:33:33,431 - INFO - backend.src.core.config - auth_router included successfully
2025-04-07 18:33:33,431 - INFO - backend.src.core.config - Including food_router...
2025-04-07 18:33:33,431 - INFO - backend.src.core.config - food_router included successfully
2025-04-07 18:33:33,431 - INFO - backend.src.core.config - clients_router included successfully
2025-04-07 18:33:33,431 - INFO - backend.src.core.config - database_router included successfully
2025-04-07 18:33:33,431 - INFO - backend.src.core.config - Routes initialized successfully
2025-04-09 21:26:52,741 - INFO - src.core.config - Starting to initialize routes...
2025-04-09 21:26:52,868 - INFO - src.core.config - Imported auth_router successfully
2025-04-09 21:26:52,884 - INFO - src.core.config - Imported clients_router successfully
2025-04-09 21:26:52,884 - INFO - src.core.config - food_router created successfully
2025-04-09 21:26:52,899 - INFO - src.core.config - Imported food_router successfully
2025-04-09 21:26:52,899 - INFO - src.core.config - Imported database_router successfully
2025-04-09 21:26:52,899 - INFO - src.core.config - Including auth_router...
2025-04-09 21:26:52,899 - INFO - src.core.config - auth_router included successfully
2025-04-09 21:26:52,899 - INFO - src.core.config - Including food_router...
2025-04-09 21:26:52,899 - INFO - src.core.config - food_router included successfully
2025-04-09 21:26:52,899 - INFO - src.core.config - clients_router included successfully
2025-04-09 21:26:52,899 - INFO - src.core.config - database_router included successfully
2025-04-09 21:26:52,899 - INFO - src.core.config - Routes initialized successfully
2025-04-09 21:35:48,632 - INFO - src.core.config - Starting to initialize routes...
2025-04-09 21:35:48,713 - INFO - src.core.config - Imported auth_router successfully
2025-04-09 21:35:48,713 - INFO - src.core.config - Imported clients_router successfully
2025-04-09 21:35:48,722 - INFO - src.core.config - food_router created successfully
2025-04-09 21:35:48,723 - INFO - src.core.config - Imported food_router successfully
2025-04-09 21:35:48,723 - INFO - src.core.config - Imported database_router successfully
2025-04-09 21:35:48,723 - INFO - src.core.config - Including auth_router...
2025-04-09 21:35:48,730 - INFO - src.core.config - auth_router included successfully
2025-04-09 21:35:48,743 - INFO - src.core.config - Including food_router...
2025-04-09 21:35:48,743 - INFO - src.core.config - food_router included successfully
2025-04-09 21:35:48,743 - INFO - src.core.config - clients_router included successfully
2025-04-09 21:35:48,743 - INFO - src.core.config - database_router included successfully
2025-04-09 21:35:48,743 - INFO - src.core.config - Routes initialized successfully
2025-04-09 21:40:26,883 - INFO - src.core.config - Starting to initialize routes...
2025-04-09 21:40:26,945 - INFO - src.core.config - Imported auth_router successfully
2025-04-09 21:40:26,945 - INFO - src.core.config - Imported clients_router successfully
2025-04-09 21:40:26,945 - INFO - src.core.config - food_router created successfully
2025-04-09 21:40:26,961 - INFO - src.core.config - Imported food_router successfully
2025-04-09 21:40:26,961 - INFO - src.core.config - Imported database_router successfully
2025-04-09 21:40:26,961 - INFO - src.core.config - Including auth_router...
2025-04-09 21:40:26,961 - INFO - src.core.config - auth_router included successfully
2025-04-09 21:40:26,961 - INFO - src.core.config - Including food_router...
2025-04-09 21:40:26,961 - INFO - src.core.config - food_router included successfully
2025-04-09 21:40:26,971 - INFO - src.core.config - clients_router included successfully
2025-04-09 21:40:26,971 - INFO - src.core.config - database_router included successfully
2025-04-09 21:40:26,971 - INFO - src.core.config - Routes initialized successfully
2025-04-09 21:40:27,246 - INFO - src.core.config - Starting up application...
2025-04-09 21:40:27,246 - INFO - src.core.config - Checking if migrations are up to date...
2025-04-09 21:40:27,261 - WARNING - src.core.config - Database is not up to date. Applying migrations...
2025-04-09 21:40:27,261 - ERROR - src.core.config - Failed to apply migrations: Table 'users' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
2025-04-09 21:40:31,282 - INFO - src.core.config - Starting up application...
2025-04-09 21:40:31,282 - INFO - src.core.config - Checking if migrations are up to date...
2025-04-09 21:40:31,291 - WARNING - src.core.config - Database is not up to date. Applying migrations...
2025-04-09 21:40:31,291 - ERROR - src.core.config - Failed to apply migrations: Table 'users' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
2025-04-09 21:40:31,967 - INFO - src.core.config - Starting up application...
2025-04-09 21:40:31,982 - INFO - src.core.config - Checking if migrations are up to date...
2025-04-09 21:40:31,983 - WARNING - src.core.config - Database is not up to date. Applying migrations...
2025-04-09 21:40:31,983 - ERROR - src.core.config - Failed to apply migrations: Table 'users' is already defined for this MetaData instance.  Specify 'extend_existing=True' to redefine options and columns on an existing Table object.
2025-04-09 21:47:15,415 - INFO - src.core.config - Starting to initialize routes...
2025-04-09 21:47:15,509 - INFO - src.core.config - Imported auth_router successfully
2025-04-09 21:47:15,509 - INFO - src.core.config - Imported clients_router successfully
2025-04-09 21:47:15,509 - INFO - src.core.config - food_router created successfully
2025-04-09 21:47:15,509 - INFO - src.core.config - Imported food_router successfully
2025-04-09 21:47:15,509 - INFO - src.core.config - Imported database_router successfully
2025-04-09 21:47:15,509 - INFO - src.core.config - Including auth_router...
2025-04-09 21:47:15,525 - INFO - src.core.config - auth_router included successfully
2025-04-09 21:47:15,525 - INFO - src.core.config - Including food_router...
2025-04-09 21:47:15,525 - INFO - src.core.config - food_router included successfully
2025-04-09 21:47:15,525 - INFO - src.core.config - clients_router included successfully
2025-04-09 21:47:15,525 - INFO - src.core.config - database_router included successfully
2025-04-09 21:47:15,525 - INFO - src.core.config - Routes initialized successfully
2025-04-09 21:47:15,682 - INFO - src.core.config - Starting up application...
2025-04-09 21:47:17,260 - INFO - src.core.config - Starting up application...
2025-04-09 21:47:17,527 - INFO - src.core.config - Starting up application...
2025-04-09 21:51:37,559 - INFO - src.core.config - Starting to initialize routes...
2025-04-09 21:51:37,640 - INFO - src.core.config - Imported auth_router successfully
2025-04-09 21:51:37,656 - INFO - src.core.config - Imported clients_router successfully
2025-04-09 21:51:37,656 - INFO - src.core.config - food_router created successfully
2025-04-09 21:51:37,656 - INFO - src.core.config - Imported food_router successfully
2025-04-09 21:51:37,656 - INFO - src.core.config - Imported database_router successfully
2025-04-09 21:51:37,656 - INFO - src.core.config - Including auth_router...
2025-04-09 21:51:37,656 - INFO - src.core.config - auth_router included successfully
2025-04-09 21:51:37,680 - INFO - src.core.config - Including food_router...
2025-04-09 21:51:37,686 - INFO - src.core.config - food_router included successfully
2025-04-09 21:51:37,686 - INFO - src.core.config - clients_router included successfully
2025-04-09 21:51:37,686 - INFO - src.core.config - database_router included successfully
2025-04-09 21:51:37,686 - INFO - src.core.config - Routes initialized successfully
2025-04-09 21:51:37,876 - INFO - src.core.config - Starting up application...
2025-04-09 21:51:37,900 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 21:51:38,033 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 21:51:38,172 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 21:51:38,176 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 21:51:38,188 - INFO - src.core.config - Authenticating user: nonexistent
2025-04-09 21:51:38,190 - ERROR - src.core.config - Database error during login for username nonexistent: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('nonexistent',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 21:51:38,975 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 21:51:38,975 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 21:51:38,999 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 21:51:39,000 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 21:51:39,020 - INFO - src.core.config - Shutting down application...
2025-04-09 21:51:39,023 - INFO - src.core.config - Starting up application...
2025-04-09 21:51:39,026 - INFO - src.core.config - Creating user with username: newuser
2025-04-09 21:51:39,032 - ERROR - src.core.config - Error creating user: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 795, in call_soon
    self._check_closed()
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 541, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 82, in create_user
    await check_table_exists(db)
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 42, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 794, in _handle_exception
    raise error
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 375, in query
  File "asyncpg\\protocol\\protocol.pyx", line 368, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\\protocol\\coreproto.pyx", line 1174, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\\protocol\\protocol.pyx", line 967, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 366, in write
    self._loop_writing(data=bytes(data))
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 402, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'send'
2025-04-09 21:51:39,077 - INFO - src.core.config - Creating user with username: duplicateuser
2025-04-09 21:51:39,092 - ERROR - src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 360, in query
  File "asyncpg\\protocol\\protocol.pyx", line 745, in asyncpg.protocol.protocol.BaseProtocol._check_state
asyncpg.exceptions._base.InterfaceError: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 42, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-09 21:51:39,100 - INFO - src.core.config - Shutting down application...
2025-04-09 21:51:39,103 - INFO - src.core.config - Starting up application...
2025-04-09 21:51:39,108 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 21:51:39,108 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-09 21:51:39,122 - INFO - src.core.config - Shutting down application...
2025-04-09 22:15:18,329 - INFO - src.core.config - food_router created successfully
2025-04-09 22:18:14,400 - INFO - src.core.config - food_router created successfully
2025-04-09 22:18:14,615 - INFO - src.core.config - Starting up application...
2025-04-09 22:18:14,624 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:14,753 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:14,928 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:14,935 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:14,949 - INFO - src.core.config - Authenticating user: nonexistent
2025-04-09 22:18:14,952 - ERROR - src.core.config - Database error during login for username nonexistent: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('nonexistent',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:15,714 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:15,718 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:15,740 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:15,743 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:15,768 - INFO - src.core.config - Shutting down application...
2025-04-09 22:18:15,789 - INFO - src.core.config - Starting up application...
2025-04-09 22:18:15,792 - INFO - src.core.config - Creating user with username: newuser
2025-04-09 22:18:15,792 - ERROR - src.core.config - Error creating user: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 795, in call_soon
    self._check_closed()
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 541, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 82, in create_user
    await check_table_exists(db)
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 42, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 794, in _handle_exception
    raise error
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 375, in query
  File "asyncpg\\protocol\\protocol.pyx", line 368, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\\protocol\\coreproto.pyx", line 1174, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\\protocol\\protocol.pyx", line 967, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 366, in write
    self._loop_writing(data=bytes(data))
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 402, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'send'
2025-04-09 22:18:15,820 - INFO - src.core.config - Creating user with username: duplicateuser
2025-04-09 22:18:15,820 - ERROR - src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 360, in query
  File "asyncpg\\protocol\\protocol.pyx", line 745, in asyncpg.protocol.protocol.BaseProtocol._check_state
asyncpg.exceptions._base.InterfaceError: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 42, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-09 22:18:15,841 - INFO - src.core.config - Shutting down application...
2025-04-09 22:18:15,849 - INFO - src.core.config - Starting up application...
2025-04-09 22:18:15,857 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:15,859 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-09 22:18:15,886 - INFO - src.core.config - Shutting down application...
2025-04-09 22:18:58,003 - INFO - src.core.config - food_router created successfully
2025-04-09 22:18:58,211 - INFO - src.core.config - Starting up application...
2025-04-09 22:18:58,224 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:58,359 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:58,528 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:58,534 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:58,548 - INFO - src.core.config - Authenticating user: nonexistent
2025-04-09 22:18:58,554 - ERROR - src.core.config - Database error during login for username nonexistent: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('nonexistent',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:59,250 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:59,251 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:59,278 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:59,282 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-09 22:18:59,298 - INFO - src.core.config - Shutting down application...
2025-04-09 22:18:59,307 - INFO - src.core.config - Starting up application...
2025-04-09 22:18:59,312 - INFO - src.core.config - Creating user with username: newuser
2025-04-09 22:18:59,316 - ERROR - src.core.config - Error creating user: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 795, in call_soon
    self._check_closed()
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 541, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 82, in create_user
    await check_table_exists(db)
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 42, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 794, in _handle_exception
    raise error
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 375, in query
  File "asyncpg\\protocol\\protocol.pyx", line 368, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\\protocol\\coreproto.pyx", line 1174, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\\protocol\\protocol.pyx", line 967, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 366, in write
    self._loop_writing(data=bytes(data))
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 402, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'send'
2025-04-09 22:18:59,331 - INFO - src.core.config - Creating user with username: duplicateuser
2025-04-09 22:18:59,331 - ERROR - src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 360, in query
  File "asyncpg\\protocol\\protocol.pyx", line 745, in asyncpg.protocol.protocol.BaseProtocol._check_state
asyncpg.exceptions._base.InterfaceError: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 42, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-09 22:18:59,345 - INFO - src.core.config - Shutting down application...
2025-04-09 22:18:59,353 - INFO - src.core.config - Starting up application...
2025-04-09 22:18:59,359 - INFO - src.core.config - Authenticating user: testuser
2025-04-09 22:18:59,362 - ERROR - src.core.config - Database error during login for username testuser: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('testuser',)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-09 22:18:59,374 - INFO - src.core.config - Shutting down application...
2025-04-09 22:42:19,773 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 22:42:32,765 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 22:42:32,954 - INFO - backend.src.core.config - Starting up application...
2025-04-09 22:42:32,954 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 22:42:42,868 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 22:42:43,035 - INFO - backend.src.core.config - Starting up application...
2025-04-09 22:42:43,035 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:05:01,536 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:05:01,677 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:05:01,677 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:05:13,643 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:05:13,826 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:05:13,826 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:08:58,106 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:08:58,141 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:08:58,149 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:08:58,190 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:08:58,282 - INFO - backend.src.core.config - Successfully connected to the database
2025-04-09 23:08:58,282 - INFO - backend.src.core.config - Successfully connected to the database

2025-04-09 23:08:58,282 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:09:10,833 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:09:10,864 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:09:10,865 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:09:10,893 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:09:10,946 - INFO - backend.src.core.config - Successfully connected to the database
2025-04-09 23:09:10,946 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:09:10,969 - INFO - backend.src.core.config - Successfully connected to the database
2025-04-09 23:09:10,969 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:09:18,845 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:09:18,884 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:09:18,962 - INFO - backend.src.core.config - Successfully connected to the database
2025-04-09 23:09:18,963 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:09:43,635 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:09:43,666 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:09:43,762 - INFO - backend.src.core.config - Successfully connected to the database
2025-04-09 23:09:43,762 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-09 23:13:20,755 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:13:20,794 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:13:20,905 - INFO - backend.src.core.config - Successfully connected to the database
2025-04-09 23:13:35,866 - INFO - backend.src.core.config - food_router created successfully
2025-04-09 23:13:35,901 - INFO - backend.src.core.config - Starting up application...
2025-04-09 23:13:35,996 - INFO - backend.src.core.config - Successfully connected to the database
2025-04-09 23:15:28,119 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 02:22:47,915 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:22:48,175 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:22:48,175 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:22:59,553 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:22:59,798 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:22:59,798 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:25:47,183 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:25:55,746 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:25:55,987 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:25:55,987 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:26:03,244 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:26:03,519 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:26:03,519 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:28:08,882 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:28:09,108 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:28:09,108 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:28:23,905 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:28:24,180 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:28:24,180 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:28:24,180 - INFO - backend.src.core.config - Running migrations online...
2025-04-10 02:28:24,306 - ERROR - backend.src.core.config - Failed to apply migrations: Can't invoke function 'configure', as the proxy object has not yet been established for the Alembic 'EnvironmentContext' class.  Try placing this code inside a callable.
2025-04-10 02:28:56,867 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:28:57,077 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:28:57,077 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:28:57,077 - INFO - backend.src.core.config - Running migrations online...
2025-04-10 02:28:57,191 - ERROR - backend.src.core.config - Failed to apply migrations: Can't invoke function 'configure', as the proxy object has not yet been established for the Alembic 'EnvironmentContext' class.  Try placing this code inside a callable.
2025-04-10 02:39:36,984 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:39:37,114 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:39:37,114 - INFO - backend.src.core.config - Checking if migrations are up to date...
2025-04-10 02:54:50,743 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:54:50,810 - INFO - backend.src.core.config - Starting up application...
2025-04-10 02:55:01,137 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 02:55:01,166 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:07:25,652 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:08:19,744 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:08:19,907 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:08:20,669 - INFO - backend.src.core.config - Authenticating user: testuser
2025-04-10 03:08:20,672 - ERROR - backend.src.core.config - Error during login for username testuser: Task <Task pending name='anyio.from_thread.BlockingPortal._call_func' coro=<BlockingPortal._call_func() running at C:\Users\kirill\gymhepler\venv\Lib\site-packages\anyio\from_thread.py:221> cb=[TaskGroup._spawn.<locals>.task_done() at C:\Users\kirill\gymhepler\venv\Lib\site-packages\anyio\_backends\_asyncio.py:794]> got Future <Future pending cb=[BaseProtocol._on_waiter_completed()]> attached to a different loop
2025-04-10 03:08:20,680 - INFO - backend.src.core.config - Authenticating user: nonexistent
2025-04-10 03:08:20,680 - ERROR - backend.src.core.config - Database error during login for username nonexistent: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('nonexistent',)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-10 03:08:22,317 - ERROR - backend.src.core.config - Unhandled error: No module named 'src'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\core\security.py", line 58, in get_current_user
    from src.models.tables import Users
ModuleNotFoundError: No module named 'src'
2025-04-10 03:08:22,503 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:08:22,503 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:08:22,513 - INFO - backend.src.core.config - Creating user with username: newuser
2025-04-10 03:08:22,513 - ERROR - backend.src.core.config - Error creating user: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 795, in call_soon
    self._check_closed()
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 541, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 71, in create_user
    await check_table_exists(db)
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 794, in _handle_exception
    raise error
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 375, in query
  File "asyncpg\\protocol\\protocol.pyx", line 368, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\\protocol\\coreproto.pyx", line 1174, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\\protocol\\protocol.pyx", line 967, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 366, in write
    self._loop_writing(data=bytes(data))
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 402, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'send'
2025-04-10 03:08:22,534 - INFO - backend.src.core.config - Creating user with username: duplicateuser
2025-04-10 03:08:22,534 - ERROR - backend.src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 360, in query
  File "asyncpg\\protocol\\protocol.pyx", line 745, in asyncpg.protocol.protocol.BaseProtocol._check_state
asyncpg.exceptions._base.InterfaceError: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-10 03:08:22,534 - INFO - backend.src.core.config - Creating user with username: duplicateuser
2025-04-10 03:08:22,543 - ERROR - backend.src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 360, in query
  File "asyncpg\\protocol\\protocol.pyx", line 745, in asyncpg.protocol.protocol.BaseProtocol._check_state
asyncpg.exceptions._base.InterfaceError: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-10 03:08:22,548 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:08:22,555 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:08:23,214 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:16:51,331 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:23:36,005 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:23:52,525 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:23:58,217 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:28:24,103 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:28:30,474 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:28:55,664 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:28:55,688 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:30:31,150 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:30:31,180 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 03:30:31,185 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 03:30:31,185 - INFO - backend.src.core.config - Database router included with routes: []
2025-04-10 03:30:31,185 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 03:30:31,185 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:30:36,398 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:41:38,356 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:45:18,663 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:45:35,676 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:45:35,715 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 03:45:35,715 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 03:45:35,740 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 03:45:35,931 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:45:36,968 - INFO - backend.src.core.config - Authenticating user: testuser
2025-04-10 03:45:36,972 - ERROR - backend.src.core.config - Error during login for username testuser: Task <Task pending name='anyio.from_thread.BlockingPortal._call_func' coro=<BlockingPortal._call_func() running at C:\Users\kirill\gymhepler\venv\Lib\site-packages\anyio\from_thread.py:221> cb=[TaskGroup._spawn.<locals>.task_done() at C:\Users\kirill\gymhepler\venv\Lib\site-packages\anyio\_backends\_asyncio.py:794]> got Future <Future pending cb=[BaseProtocol._on_waiter_completed()]> attached to a different loop
2025-04-10 03:45:36,986 - INFO - backend.src.core.config - Authenticating user: nonexistent
2025-04-10 03:45:36,990 - ERROR - backend.src.core.config - Database error during login for username nonexistent: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('nonexistent',)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-10 03:45:38,976 - ERROR - backend.src.core.config - Unhandled error: No module named 'src'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\core\security.py", line 58, in get_current_user
    from src.models.tables import Users
ModuleNotFoundError: No module named 'src'
2025-04-10 03:45:39,197 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:45:39,197 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:45:39,207 - INFO - backend.src.core.config - Creating user with username: newuser
2025-04-10 03:45:39,207 - ERROR - backend.src.core.config - Error creating user: 'NoneType' object has no attribute 'send'
Traceback (most recent call last):
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 795, in call_soon
    self._check_closed()
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 541, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 71, in create_user
    await check_table_exists(db)
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 794, in _handle_exception
    raise error
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 375, in query
  File "asyncpg\\protocol\\protocol.pyx", line 368, in asyncpg.protocol.protocol.BaseProtocol.query
  File "asyncpg\\protocol\\coreproto.pyx", line 1174, in asyncpg.protocol.protocol.CoreProtocol._simple_query
  File "asyncpg\\protocol\\protocol.pyx", line 967, in asyncpg.protocol.protocol.BaseProtocol._write
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 366, in write
    self._loop_writing(data=bytes(data))
  File "C:\Users\kirill\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 402, in _loop_writing
    self._write_fut = self._loop._proactor.send(self._sock, data)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'send'
2025-04-10 03:45:39,217 - INFO - backend.src.core.config - Creating user with username: duplicateuser
2025-04-10 03:45:39,217 - ERROR - backend.src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 360, in query
  File "asyncpg\\protocol\\protocol.pyx", line 745, in asyncpg.protocol.protocol.BaseProtocol._check_state
asyncpg.exceptions._base.InterfaceError: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-10 03:45:39,227 - INFO - backend.src.core.config - Creating user with username: duplicateuser
2025-04-10 03:45:39,229 - ERROR - backend.src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 843, in _start_transaction
    await self._transaction.start()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\transaction.py", line 146, in start
    await self._connection.execute(query)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 349, in execute
    result = await self._protocol.query(query, timeout)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 360, in query
  File "asyncpg\\protocol\\protocol.pyx", line 745, in asyncpg.protocol.protocol.BaseProtocol._check_state
asyncpg.exceptions._base.InterfaceError: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 515, in _prepare_and_execute
    await adapt_connection._start_transaction()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 845, in _start_transaction
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot perform operation: another operation is in progress
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-10 03:45:39,229 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:45:39,238 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:45:40,009 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:50:06,924 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 03:50:06,965 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 03:50:06,965 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 03:50:06,975 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 03:50:06,996 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 03:50:07,255 - INFO - backend.src.core.config - Starting up application...
2025-04-10 03:50:07,609 - INFO - backend.src.core.config - Authenticating user: testuser
2025-04-10 03:50:07,690 - INFO - backend.src.core.config - User testuser found, verifying password...
2025-04-10 03:50:07,933 - INFO - backend.src.core.config - User testuser authenticated successfully
2025-04-10 03:50:07,974 - INFO - backend.src.core.config - Authenticating user: testuser
2025-04-10 03:50:07,978 - INFO - backend.src.core.config - User testuser found, verifying password...
2025-04-10 03:50:08,215 - WARNING - backend.src.core.config - Password verification failed for user testuser
2025-04-10 03:50:08,226 - INFO - backend.src.core.config - Authenticating user: nonexistent
2025-04-10 03:50:08,229 - WARNING - backend.src.core.config - User nonexistent not found
2025-04-10 03:50:08,933 - ERROR - backend.src.core.config - Unhandled error: No module named 'src'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\core\security.py", line 58, in get_current_user
    from src.models.tables import Users
ModuleNotFoundError: No module named 'src'
2025-04-10 03:50:09,144 - INFO - backend.src.core.config - Authenticating user: testuser
2025-04-10 03:50:09,144 - INFO - backend.src.core.config - User testuser found, verifying password...
2025-04-10 03:50:09,379 - INFO - backend.src.core.config - User testuser authenticated successfully
2025-04-10 03:50:09,406 - INFO - backend.src.core.config - Authenticating user: testuser
2025-04-10 03:50:09,409 - INFO - backend.src.core.config - User testuser found, verifying password...
2025-04-10 03:50:09,645 - INFO - backend.src.core.config - User testuser authenticated successfully
2025-04-10 03:50:09,652 - ERROR - backend.src.core.config - Unhandled error: No module named 'src'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\core\security.py", line 58, in get_current_user
    from src.models.tables import Users
ModuleNotFoundError: No module named 'src'
2025-04-10 03:50:09,837 - ERROR - backend.src.core.config - Unhandled error: No module named 'src'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\core\security.py", line 58, in get_current_user
    from src.models.tables import Users
ModuleNotFoundError: No module named 'src'
2025-04-10 03:50:10,035 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 03:52:24,003 - INFO - src.core.config - food_router created successfully
2025-04-10 03:52:24,024 - INFO - src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 03:52:24,035 - INFO - src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 03:52:24,035 - INFO - src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 03:52:24,051 - INFO - src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 11:13:49,763 - INFO - src.core.config - food_router created successfully
2025-04-10 11:13:49,814 - INFO - src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 11:13:49,823 - INFO - src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 11:13:49,828 - INFO - src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 11:13:49,828 - INFO - src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 11:16:04,617 - INFO - src.core.config - food_router created successfully
2025-04-10 11:16:04,636 - INFO - src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 11:16:04,653 - INFO - src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 11:16:04,653 - INFO - src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 11:16:04,671 - INFO - src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 11:16:48,135 - INFO - backend.src.core.config - food_router created successfully
2025-04-10 11:16:48,163 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 11:16:48,178 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 11:16:48,182 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 11:16:48,192 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 11:16:48,192 - INFO - backend.src.core.config - Starting up application...
2025-04-10 11:17:36,612 - INFO - backend.src.core.config - Creating user with username: admin
2025-04-10 11:17:36,789 - ERROR - backend.src.core.config - Table 'users' does not exist or is not accessible: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedTableError: отношение "users" не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\clients.py", line 43, in check_table_exists
    await db.execute(select(1).select_from(Users).limit(1))
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedTableError'>: отношение "users" не существует
[SQL: SELECT 1 
FROM users 
 LIMIT $1::INTEGER]
[parameters: (1,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-04-10 11:17:52,884 - INFO - backend.src.core.config - Creating user with username: admin
2025-04-10 11:17:52,884 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-10 11:17:52,884 - INFO - backend.src.core.config - Querying user by username: admin
2025-04-10 11:17:52,915 - WARNING - backend.src.core.config - User admin not found
2025-04-10 11:17:53,323 - INFO - backend.src.core.config - User admin created successfully with ID 1
2025-04-10 11:17:59,838 - INFO - backend.src.core.config - Fetching all users
2025-04-10 11:17:59,838 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-10 11:17:59,845 - INFO - backend.src.core.config - Found 1 users
2025-04-10 11:18:01,623 - INFO - backend.src.core.config - Fetching all users
2025-04-10 11:18:01,630 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-10 11:18:01,630 - INFO - backend.src.core.config - Found 1 users
2025-04-10 11:18:29,002 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 11:18:29,016 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 11:18:29,369 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 11:18:43,529 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 11:18:43,532 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 11:18:43,891 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 11:19:39,289 - ERROR - backend.src.core.config - Unhandled error: No module named 'src'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\core\security.py", line 58, in get_current_user
    from src.models.tables import Users
ModuleNotFoundError: No module named 'src'
2025-04-10 11:25:36,009 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 11:54:07,323 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 11:54:07,323 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 11:54:07,323 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 11:54:07,339 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 11:54:07,343 - INFO - backend.src.core.config - Starting up application...
2025-04-10 11:54:07,776 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 11:55:16,739 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 11:55:16,741 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 11:55:16,746 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 11:55:16,746 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 11:55:16,746 - INFO - backend.src.core.config - Starting up application...
2025-04-10 11:55:36,021 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 11:55:36,234 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 11:55:36,666 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 11:55:36,772 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 11:55:36,772 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 11:55:36,772 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 11:55:36,772 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 11:55:36,786 - INFO - backend.src.core.config - User admin found by token
2025-04-10 11:55:36,897 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:14:47,998 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 12:14:48,007 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 12:14:48,010 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 12:14:48,016 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 12:14:48,016 - INFO - backend.src.core.config - Starting up application...
2025-04-10 12:14:58,659 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:14:58,659 - ERROR - backend.src.core.config - Failed to decode token
2025-04-10 12:15:11,031 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:15:11,042 - ERROR - backend.src.core.config - Database error during login for username admin: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: connection is closed
[SQL: SELECT users.id, users.username, users.password_hash, users.name, users.weight, users.height, users.age, users.fitness_goal, users.is_active, users.scope 
FROM users 
WHERE users.username = $1::VARCHAR]
[parameters: ('admin',)]
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2025-04-10 12:15:46,727 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:15:46,860 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 12:15:47,216 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 12:16:11,387 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:16:11,474 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 12:16:11,838 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 12:16:16,697 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:16:16,697 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:16:16,710 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:16:16,710 - INFO - backend.src.core.config - Searching for food 'milk' in USDA API for user 1
2025-04-10 12:16:20,789 - ERROR - backend.src.core.config - USDA API error: Client error '403 Forbidden' for url 'https://api.nal.usda.gov/fdc/v1/foods/search?query=milk&dataType=Foundation&requireAllWords=false&pageSize=1&api_key=your_usda_api_key'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\foods.py", line 52, in search_and_add_food
    response.raise_for_status()  # Проверяем, что запрос успешен
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://api.nal.usda.gov/fdc/v1/foods/search?query=milk&dataType=Foundation&requireAllWords=false&pageSize=1&api_key=your_usda_api_key'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
2025-04-10 12:20:42,771 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 12:20:42,850 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 12:20:48,748 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 12:20:48,750 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 12:20:48,756 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 12:20:48,764 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 12:20:48,764 - INFO - backend.src.core.config - Starting up application...
2025-04-10 12:20:52,908 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:20:52,908 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:20:53,193 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:20:53,193 - INFO - backend.src.core.config - Searching for food 'milk' in USDA API for user 1
2025-04-10 12:20:55,884 - ERROR - backend.src.core.config - Unhandled error: 'name'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\foods.py", line 68, in search_and_add_food
    nutrient["name"].lower(): nutrient["value"]
    ~~~~~~~~^^^^^^^^
KeyError: 'name'
2025-04-10 12:31:39,030 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:31:39,030 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:31:39,037 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:31:39,037 - ERROR - backend.src.core.config - Unhandled error: AuthHandler.create_access_token() missing 1 required positional argument: 'expires_delta'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\author.py", line 120, in refresh_token
    new_access_token = auth_handler.create_access_token(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AuthHandler.create_access_token() missing 1 required positional argument: 'expires_delta'
2025-04-10 12:31:39,047 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:31:39,047 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:31:39,052 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:31:39,052 - ERROR - backend.src.core.config - Unhandled error: AuthHandler.create_access_token() missing 1 required positional argument: 'expires_delta'
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\author.py", line 120, in refresh_token
    new_access_token = auth_handler.create_access_token(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: AuthHandler.create_access_token() missing 1 required positional argument: 'expires_delta'
2025-04-10 12:31:51,243 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:31:51,243 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 12:31:51,684 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 12:31:51,737 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:31:51,737 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:31:51,743 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:31:51,743 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:31:51,749 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:31:51,874 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:36:10,011 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 12:37:05,060 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-10 12:37:05,091 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 12:37:05,091 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 12:37:05,091 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 12:37:05,106 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 12:37:05,106 - INFO - backend.src.core.config - Starting up application...
2025-04-10 12:38:19,768 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:38:19,768 - ERROR - backend.src.core.config - Failed to decode token
2025-04-10 12:38:41,824 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:38:41,999 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 12:38:42,431 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 12:38:59,237 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:38:59,241 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 12:38:59,665 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 12:39:35,327 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:39:35,327 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:39:35,332 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:39:35,332 - INFO - backend.src.core.config - Searching for food 'milk' in USDA API for user 1
2025-04-10 12:39:38,632 - INFO - backend.src.core.config - Food found with data_type 'Foundation'
2025-04-10 12:39:38,664 - ERROR - backend.src.core.config - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "vitamin_c" отношения "foods" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, Cheese, ricotta, whole milk, 157, 6.86, 11, 7.81, null, null, 1).
[SQL: INSERT INTO foods (name, calories, carbs, fats, proteins, vitamin_c, calcium, user_id) VALUES ($1::VARCHAR, $2::FLOAT, $3::FLOAT, $4::FLOAT, $5::FLOAT, $6::FLOAT, $7::FLOAT, $8::INTEGER) RETURNING foods.id]
[parameters: ('Cheese, ricotta, whole milk', 157, 6.86, 11.0, 7.81, None, None, 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\\protocol\\protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.NotNullViolationError: значение NULL в столбце "vitamin_c" отношения "foods" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, Cheese, ricotta, whole milk, 157, 6.86, 11, 7.81, null, null, 1).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "vitamin_c" отношения "foods" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, Cheese, ricotta, whole milk, 157, 6.86, 11, 7.81, null, null, 1).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\foods.py", line 107, in search_and_add_food
    await db.commit()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1011, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4353, in flush
    self._flush(objects)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4488, in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4449, in _flush
    flush_context.execute()
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: значение NULL в столбце "vitamin_c" отношения "foods" нарушает ограничение NOT NULL
DETAIL:  Ошибочная строка содержит (1, Cheese, ricotta, whole milk, 157, 6.86, 11, 7.81, null, null, 1).
[SQL: INSERT INTO foods (name, calories, carbs, fats, proteins, vitamin_c, calcium, user_id) VALUES ($1::VARCHAR, $2::FLOAT, $3::FLOAT, $4::FLOAT, $5::FLOAT, $6::FLOAT, $7::FLOAT, $8::INTEGER) RETURNING foods.id]
[parameters: ('Cheese, ricotta, whole milk', 157, 6.86, 11.0, 7.81, None, None, 1)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-10 12:45:26,719 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:45:26,719 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:45:26,726 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:45:26,726 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:45:26,731 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:45:26,860 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:46:15,621 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 12:46:58,853 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-10 12:46:58,873 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 12:46:58,888 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 12:46:58,888 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 12:46:58,903 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 12:46:58,904 - INFO - backend.src.core.config - Starting up application...
2025-04-10 12:47:20,156 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:47:20,156 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:47:20,310 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:47:20,310 - INFO - backend.src.core.config - Searching for food 'milk' in USDA API for user 1
2025-04-10 12:47:22,927 - INFO - backend.src.core.config - Food found with data_type 'Foundation'
2025-04-10 12:47:22,967 - INFO - backend.src.core.config - Food 'Cheese, ricotta, whole milk' added successfully for user 1
2025-04-10 12:47:22,974 - ERROR - backend.src.core.config - Unhandled error: 3 validation errors for FoodResponse
carbs
  Input should be a valid integer, got a number with a fractional part [type=int_from_float, input_value=6.86, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/int_from_float
proteins
  Input should be a valid integer, got a number with a fractional part [type=int_from_float, input_value=7.81, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/int_from_float
user_ud
  Field required [type=missing, input_value=<backend.src.models.table...t at 0x00000289D9B5BAA0>, input_type=Foods]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\foods.py", line 123, in search_and_add_food
    return FoodResponse.model_validate(new_food)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 3 validation errors for FoodResponse
carbs
  Input should be a valid integer, got a number with a fractional part [type=int_from_float, input_value=6.86, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/int_from_float
proteins
  Input should be a valid integer, got a number with a fractional part [type=int_from_float, input_value=7.81, input_type=float]
    For further information visit https://errors.pydantic.dev/2.10/v/int_from_float
user_ud
  Field required [type=missing, input_value=<backend.src.models.table...t at 0x00000289D9B5BAA0>, input_type=Foods]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
2025-04-10 12:51:59,773 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-10 12:51:59,805 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 12:51:59,810 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 12:51:59,814 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 12:51:59,818 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 12:51:59,818 - INFO - backend.src.core.config - Starting up application...
2025-04-10 12:52:03,819 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:52:03,820 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:52:04,001 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:52:04,001 - INFO - backend.src.core.config - Searching for food 'milk' in USDA API for user 1
2025-04-10 12:52:06,650 - INFO - backend.src.core.config - Food found with data_type 'Foundation'
2025-04-10 12:52:06,684 - INFO - backend.src.core.config - Food 'Cheese, ricotta, whole milk' added successfully for user 1
2025-04-10 12:52:06,684 - ERROR - backend.src.core.config - Unhandled error: 1 validation error for FoodResponse
  Input should be a valid dictionary or instance of FoodResponse [type=model_type, input_value=<backend.src.models.table...t at 0x0000015A7F13BF20>, input_type=Foods]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\backend\src\api\routes\foods.py", line 121, in search_and_add_food
    return FoodResponse.model_validate(new_food)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\kirill\gymhepler\venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for FoodResponse
  Input should be a valid dictionary or instance of FoodResponse [type=model_type, input_value=<backend.src.models.table...t at 0x0000015A7F13BF20>, input_type=Foods]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
2025-04-10 12:54:55,213 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 12:55:17,407 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-10 12:55:17,441 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 12:55:17,444 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 12:55:17,449 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 12:55:17,453 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 12:55:17,453 - INFO - backend.src.core.config - Starting up application...
2025-04-10 12:58:13,137 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-10 12:58:13,188 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 12:58:13,190 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 12:58:13,195 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 12:58:13,202 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 12:58:13,202 - INFO - backend.src.core.config - Starting up application...
2025-04-10 12:58:35,933 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:58:36,120 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 12:58:36,539 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 12:58:56,534 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-10 12:58:56,537 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-10 12:58:56,926 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-10 12:59:01,334 - INFO - backend.src.core.config - Decoding token to get username
2025-04-10 12:59:01,334 - INFO - backend.src.core.config - Token decoded, username: admin
2025-04-10 12:59:01,337 - INFO - backend.src.core.config - User admin found by token
2025-04-10 12:59:01,337 - INFO - backend.src.core.config - Searching for food 'milk' in USDA API for user 1
2025-04-10 12:59:04,633 - INFO - backend.src.core.config - Food found with data_type 'Foundation'
2025-04-10 12:59:04,671 - INFO - backend.src.core.config - Food 'Cheese, ricotta, whole milk' added successfully for user 1
2025-04-10 12:59:50,809 - INFO - backend.src.core.config - Shutting down application...
2025-04-10 13:04:10,062 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-10 13:04:10,113 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 13:04:10,113 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 13:04:10,128 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 13:04:10,128 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 13:04:10,128 - INFO - backend.src.core.config - Starting up application...
2025-04-10 13:05:17,333 - INFO - backend.src.core.config - Fetching all users
2025-04-10 13:05:17,583 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-10 13:05:17,599 - INFO - backend.src.core.config - Found 1 users
2025-04-10 13:36:20,687 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-10 13:36:20,721 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-10 13:36:20,734 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-10 13:36:20,734 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-10 13:36:20,742 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-10 13:36:20,742 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:10:46,601 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-11 14:10:46,674 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:10:46,691 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:10:46,700 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:10:46,730 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-11 14:10:46,732 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:11:13,116 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-11 14:11:13,345 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-11 14:11:13,789 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-11 14:11:33,255 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-11 14:11:33,260 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-11 14:11:33,650 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-11 14:24:38,496 - INFO - backend.src.core.config - Shutting down application...
2025-04-11 14:36:35,027 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-11 14:36:35,106 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:36:35,122 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:36:35,169 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:36:35,169 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-11 14:36:35,169 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:36:45,416 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-11 14:36:45,479 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:36:45,479 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:36:45,533 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:36:45,542 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-11 14:36:45,542 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:37:42,856 - INFO - backend.src.core.config - Using USDA API Key: DEMO_KEY
2025-04-11 14:37:42,920 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:37:42,920 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:37:42,969 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:37:42,983 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST']), APIRoute(path='/food/food/', name='add_food', methods=['POST'])]
2025-04-11 14:37:42,983 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:37:55,583 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-11 14:37:55,737 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-11 14:37:56,150 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-11 14:38:16,416 - INFO - backend.src.core.config - Fetching all users
2025-04-11 14:38:16,426 - INFO - backend.src.core.config - Table 'users' exists and is accessible
2025-04-11 14:38:16,426 - INFO - backend.src.core.config - Found 1 users
2025-04-11 14:38:35,421 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-11 14:38:35,421 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-11 14:38:35,811 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-11 14:38:49,052 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-11 14:38:49,052 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-11 14:38:49,437 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-11 14:38:56,141 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-11 14:38:56,141 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-11 14:38:56,536 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-11 14:38:58,851 - INFO - backend.src.core.config - Authenticating user: admin
2025-04-11 14:38:58,851 - INFO - backend.src.core.config - User admin found, verifying password...
2025-04-11 14:38:59,231 - INFO - backend.src.core.config - User admin authenticated successfully
2025-04-11 14:42:46,562 - INFO - backend.src.core.config - Shutting down application...
2025-04-11 14:46:55,078 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:46:55,078 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:46:55,093 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:46:55,093 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 14:46:55,093 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:50:03,226 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:50:03,240 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:50:03,240 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:50:03,240 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 14:50:03,240 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:52:01,150 - INFO - backend.src.core.config - Shutting down application...
2025-04-11 14:52:07,780 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:52:07,783 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:52:07,783 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:52:07,783 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 14:52:07,783 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:57:24,296 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:57:24,312 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:57:24,328 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:57:24,334 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 14:57:24,334 - INFO - backend.src.core.config - Starting up application...
2025-04-11 14:59:24,419 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 14:59:24,435 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 14:59:24,435 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 14:59:24,435 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 14:59:24,450 - INFO - backend.src.core.config - Starting up application...
2025-04-11 15:01:01,680 - INFO - backend.src.core.config - Shutting down application...
2025-04-11 15:09:19,070 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 15:09:19,083 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 15:09:19,086 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 15:09:19,086 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 15:09:19,086 - INFO - backend.src.core.config - Starting up application...
2025-04-11 15:11:32,111 - INFO - backend.src.core.config - Shutting down application...
2025-04-11 15:11:38,973 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 15:11:38,973 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 15:11:38,989 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 15:11:38,989 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 15:11:38,989 - INFO - backend.src.core.config - Starting up application...
2025-04-11 15:15:52,794 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 15:15:52,810 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 15:15:52,810 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 15:15:52,810 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 15:15:52,810 - INFO - backend.src.core.config - Starting up application...
2025-04-11 15:19:27,395 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 15:19:27,405 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 15:19:27,405 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 15:19:27,421 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 15:19:27,424 - INFO - backend.src.core.config - Starting up application...
2025-04-11 15:21:22,360 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 15:21:22,363 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 15:21:22,363 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 15:21:22,376 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 15:21:22,376 - INFO - backend.src.core.config - Starting up application...
2025-04-11 15:22:59,663 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 15:22:59,672 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 15:22:59,679 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 15:22:59,679 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 15:22:59,679 - INFO - backend.src.core.config - Starting up application...
2025-04-11 15:25:52,069 - INFO - backend.src.core.config - Shutting down application...
2025-04-11 15:25:59,754 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/db', name='setup_database', methods=['POST'])]
2025-04-11 15:25:59,754 - INFO - backend.src.core.config - Auth router included with routes: [APIRoute(path='/auth/token', name='login', methods=['POST']), APIRoute(path='/auth/me', name='read_me', methods=['GET']), APIRoute(path='/auth/refresh', name='refresh_token', methods=['POST'])]
2025-04-11 15:25:59,775 - INFO - backend.src.core.config - Clients router included with routes: [APIRoute(path='/users', name='create_user', methods=['POST']), APIRoute(path='/users', name='get_users', methods=['GET']), APIRoute(path='/users/{user_id}', name='update_user', methods=['PUT']), APIRoute(path='/users/{user_id}', name='delete_user', methods=['DELETE'])]
2025-04-11 15:25:59,775 - INFO - backend.src.core.config - Food router included with routes: [APIRoute(path='/food/search-and-add-food/', name='search_and_add_food', methods=['POST'])]
2025-04-11 15:25:59,775 - INFO - backend.src.core.config - Starting up application...
